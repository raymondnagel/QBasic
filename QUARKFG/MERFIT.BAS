COMMON GAMEFILE, X, Y, MX, MY, NAME$, PLANET$, ITEM$
SCREEN 13

C = 280: D = 180
A = 30: B = 180
PHASER = 1000: PHASER2 = 1000: MIK = 1: ADV = 1
DRAW "BM12,5C3R3DRD2GL3HU2RBDP5,3BD3C3LDLDRU RERGDE2DBD3UC4RUBM-4,+1LDRBU2C11D0BM-2,+1C8D0 BR3FU2RBR2RBM-5,+2C3G C11R3FC3D2GU3 L3FDGU2GLC4D2EDBR4R2ULBM-5,-10GUC8D0"
DIM MIKESTANDR(1 TO 500)
GET (10, 5)-(18, 20), MIKESTANDR
DRAW "BM32,5C3R3DRD2GL3HU2RBDP5,3BD3C3LDLDRU RERGDE2DBD3UC4RUBM-4,+1LDRBU2C11D0BM-2,+1C8D0 BR3FU2RBR2RBM-5,+2C3G  C11R3 DC3RD2HD2H3RGD3C4R2ULUBM-2,-9GUC8D0"
DIM MIKESTEPR(1 TO 500)
GET (30, 5)-(38, 20), MIKESTEPR

DRAW "BM52,5C3L3DLD2FR3EU2LBDP5,3BD3C3RDRDLU LHLFDH2DBD3UC4LUBM+4,+1RDLBU2C11D0BM+2,+1C8D0 BL3GU2LBL2LBM+5,+2C3F C11L3GC3D2FU3 R3GDFU2FRC4D2HDBL4L2URBM+5,-10FUC8D0"
DIM MIKESTANDL(1 TO 500)
GET (54, 5)-(45, 20), MIKESTANDL
DRAW "BM72,5C3L3DLD2FR3EU2LBDP5,3BD3C3RDRDLU LHLFDH2DBD3UC4LUBM+4,+1RDLBU2C11D0BM+2,+1C8D0 BL3GU2LBL2LBM+5,+2C3F C11L3 DC3LD2ED2E3LFD3C4L2URUBM+2,-9FUC8D0"
DIM MIKESTEPL(1 TO 500)
GET (74, 5)-(65, 20), MIKESTEPL
LINE (54, 5)-(45, 20), 9, B
LINE (74, 5)-(65, 20), 9, B
DRAW "BM90,13C6URUR2DRDH2U3EURER2FRDFD3LDLDBR4ULUBD2C14HG BU3U2L6D2BD3HGBM+7,-6HGULGBM-1,-2D0BR6D0BG2C13D0BL2D0BM-1,+2 C6R4BM-2,+1C3D0"
DIM ADVERSARY(1 TO 500)
GET (90, 5)-(102, 13), ADVERSARY
CLS
LINE (0, 144)-(319, 144), 13
LINE (0, 145)-(319, 199), 12, BF

FOR STARZ = 1 TO 40: RANDOMIZE TIMER: H = INT(RND * 320) + 1: V = INT(RND * 142) + 1: PSET (H, V), 15: NEXT STARZ
FOR STARZ = 1 TO 40: RANDOMIZE TIMER: H = INT(RND * 320) + 1: V = INT(RND * 142) + 1: PSET (H, V), 8: NEXT STARZ
FOR STARZ = 1 TO 40: RANDOMIZE TIMER: H = INT(RND * 320) + 1: V = INT(RND * 142) + 1: PSET (H, V), 7: NEXT STARZ

FOR MARKZ = 1 TO 20: RANDOMIZE TIMER: H = INT(RND * 320) + 1: V = INT(RND * 55) + 145: PSET (H, V), 13: NEXT MARKZ
FOR MARKZ = 1 TO 5: RANDOMIZE TIMER: H = INT(RND * 320) + 1: V = INT(RND * 55) + 145: PSET (H, V), 10: NEXT MARKZ
FOR MARKZ = 1 TO 10: RANDOMIZE TIMER: H = INT(RND * 320) + 1: V = INT(RND * 55) + 145: PSET (H, V), 4: NEXT MARKZ

STANCE$ = "STAND": FACE$ = "RIGHT": PUT (A, B - 15), MIKESTANDR, XOR
PUT (C, D), ADVERSARY, XOR
ON KEY(1) GOSUB PHASER
ON KEY(11) GOSUB UP
ON KEY(12) GOSUB LEFT
ON KEY(13) GOSUB RIGHT
ON KEY(14) GOSUB DOWN

DO
KEY(0) ON: FOR DELAY = 1 TO 40: NEXT DELAY: KEY(0) STOP
ENEMY:
RANDOMIZE TIMER: PUT (C, D), ADVERSARY, XOR
IF JUMP >= 4 THEN GOTO VERTICAL
IF JUMP = 0 THEN IF INT(RND * 3) = 0 THEN JUMP = 4: GOTO VERTICAL

HORIZONTAL:
IF JUMP = 0 THEN IF C < A THEN C = C + 5: D = D - 10
IF JUMP = 1 THEN IF C < A THEN C = C + 5
IF JUMP = 2 THEN IF C < A THEN C = C + 5: D = D + 7
IF JUMP = 0 THEN IF C > A THEN C = C - 5: D = D - 10
IF JUMP = 1 THEN IF C > A THEN C = C - 5
IF JUMP = 2 THEN IF C > A THEN C = C - 5: D = D + 7
GOTO ONEWAY

VERTICAL:
IF JUMP = 4 THEN IF D < B - 9 THEN D = D + 5
IF JUMP = 5 THEN IF D < B - 9 THEN D = D + 5
IF JUMP = 6 THEN IF D < B - 9 THEN D = D + 1
IF JUMP = 4 THEN IF D > B - 9 THEN D = D - 5
IF JUMP = 5 THEN IF D > B - 9 THEN D = D - 5
IF JUMP = 6 THEN IF D > B - 9 THEN D = D + 1

ONEWAY:
IF C <= 2 THEN C = 4
IF C >= 307 THEN C = 305
IF D <= 145 THEN D = 146
IF D >= 189 THEN D = 188

PUT (C, D), ADVERSARY, XOR
IF C <= A + 5 AND C >= A - 5 AND D <= B - 5 AND D >= B - 15 THEN GOTO LOSE
JUMP = JUMP + 1
IF JUMP = 3 OR JUMP = 7 THEN JUMP = 10

MIKEFIRE:
IF PHASER = 1000 THEN GOTO RES
PSET (PHASER, FOCUS), 12: IF DISTANCE <= 0 THEN PHASER = 1000: GOTO RES
IF PHASER <= 0 OR PHASER >= 319 THEN PHASER = 1000: GOTO RES
PHASER = PHASER + DIRECT
PSET (PHASER, FOCUS), 0: DISTANCE = DISTANCE - 1
IF DIRECT > 1 THEN IF POINT(PHASER + 1, FOCUS) <> 12 THEN GOSUB BOOM
IF DIRECT < 1 THEN IF POINT(PHASER - 1, FOCUS) <> 12 THEN GOSUB BOOM
IF PHASER <= C + 12 AND PHASER >= C - 1 AND FOCUS <= D + 9 AND FOCUS >= D - 1 THEN GOSUB BOOM
RES:
IF JUMP = 12 THEN JUMP = 0
LOOP UNTIL INKEY$ = ""
CLS : SYSTEM


PHASER:
IF PHASER <> 1000 THEN RETURN
KEY(0) OFF
IF FACE$ = "RIGHT" THEN DIRECT = 6: PHASER = A + 10: IF MID$(ITEM$, 4, 1) = "1" THEN DIRECT = 12
IF FACE$ = "LEFT" THEN DIRECT = -6: PHASER = A - 1: IF MID$(ITEM$, 4, 1) = "1" THEN DIRECT = -12
ON PLAY(25) GOSUB SHOT1: PLAY ON
PLAY "T255L64MBO2CDEFGABO4CDEFGABO6CDEFGAB"
SHOT1: PLAY OFF
FOCUS = B - 8: DISTANCE = 12: IF MID$(ITEM$, 4, 1) = "1" THEN DISTANCE = 400
KEY(0) ON: RETURN

BOOM:
KEY(0) OFF
IF PHASER <= A + 10 AND PHASER >= A - 10 AND FOCUS <= B + 10 AND FOCUS >= B - 10 THEN MIK = 0
IF PHASER <= C + 12 AND PHASER >= C - 1 AND FOCUS <= D + 9 AND FOCUS >= D - 1 THEN ADV = 0
CIRCLE (PHASER, FOCUS), 10, 14: PAINT (PHASER, FOCUS), 10, 14
CIRCLE (PHASER, FOCUS), 10, 10: PAINT (PHASER, FOCUS), 10, 10
CIRCLE (PHASER, FOCUS), 10, 12: PAINT (PHASER, FOCUS), 12, 12
ON PLAY(25) GOSUB EXPLODE1: PLAY ON
PLAY "T255L64MBO2DBF<DBF<DBF>DBF<DBF"
EXPLODE1: PLAY OFF
LINE (PHASER - 5, FOCUS - 5)-(PHASER + 5, FOCUS + 5), 12, BF
IF MIK = 0 THEN FOR DELAY = 1 TO 1000: NEXT DELAY: GOTO LOSE
IF ADV = 0 THEN FOR DELAY = 1 TO 1000: NEXT DELAY: GOTO WIN
PHASER = 1000: KEY(0) ON: RETURN

WALK:
IF STANCE$ = "STAND" THEN STANCE$ = "STEP": RETURN
IF STANCE$ = "STEP" THEN STANCE$ = "STAND": RETURN

STANCE:
IF FACE$ = "LEFT" AND STANCE$ = "STAND" THEN PUT (A, B - 15), MIKESTANDL, XOR
IF FACE$ = "LEFT" AND STANCE$ = "STEP" THEN PUT (A, B - 15), MIKESTEPL, XOR
IF FACE$ = "RIGHT" AND STANCE$ = "STAND" THEN PUT (A, B - 15), MIKESTANDR, XOR
IF FACE$ = "RIGHT" AND STANCE$ = "STEP" THEN PUT (A, B - 15), MIKESTEPR, XOR
RETURN

UP: KEY(0) OFF
GOSUB STANCE
IF MID$(ITEM$, 2, 1) = "1" THEN B = B - 2
B = B - 2: IF B <= 160 THEN B = 160
GOSUB WALK
GOSUB STANCE
KEY(0) ON: RETURN

LEFT: KEY(0) OFF
GOSUB STANCE
FACE$ = "LEFT"
IF MID$(ITEM$, 2, 1) = "1" THEN A = A - 4
A = A - 4: IF A <= 2 THEN A = 4
GOSUB WALK
GOSUB STANCE
KEY(0) ON: RETURN

RIGHT: KEY(0) OFF
GOSUB STANCE
FACE$ = "RIGHT"
IF MID$(ITEM$, 2, 1) = "1" THEN A = A + 4
A = A + 4: IF A >= 311 THEN A = 311
GOSUB WALK
GOSUB STANCE
KEY(0) ON: RETURN

DOWN: KEY(0) OFF
GOSUB STANCE
IF MID$(ITEM$, 2, 1) = "1" THEN B = B + 2
B = B + 2: IF B >= 198 THEN B = 196
GOSUB WALK
GOSUB STANCE
KEY(0) ON: RETURN

WIN:
CLS
PRINT "YEAH!"
SOUND 1000, 2: SOUND 800, 1: SOUND 1000, 5
FOR SUSPEND = 1 TO 2000
BABBLE$ = INKEY$
NEXT SUSPEND
CHAIN "MERCURY.BAS"

LOSE:
CLS
PRINT "#@$!@"
SOUND 500, 2: SOUND 800, 1: SOUND 500, 5
FOR SUSPEND = 1 TO 2000
BABBLE$ = INKEY$
NEXT SUSPEND
CHAIN "LOSE.BAS"

